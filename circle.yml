machine:
  python:
    version: 3.5.2
dependencies:
  override:
    - pip install -U -r requirements.txt
    - pip install -U flake8
compile:
  override:
    - mkdir content
    - python -c 'import stack' > content/eb-no-nat.json
    - USE_NAT_GATEWAY=on python -c 'import stack' > content/eb-nat.json
    - USE_ECS=on python -c 'import stack' > content/ecs-no-nat.json
    - USE_ECS=on USE_NAT_GATEWAY=on python -c 'import stack' > content/ecs-nat.json
test:
  override:
    - flake8 .
deployment:
  production:
    branch: develop
    commands:
      - aws s3 sync content/ s3://tobiasmcnulty-cloudformation-templates/ --acl public-read
